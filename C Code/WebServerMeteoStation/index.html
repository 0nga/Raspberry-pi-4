<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Meteo Station</title>
</head>

<body>
    <h1>Meteo station</h1>
     <div id="lastRow"></div>

    <script>
        // Function to reload the page
        function reloadPage() {
            location.reload(true); // Reload the page from the server
        }

        // Reload the page every 2 seconds
        setInterval(reloadPage, 2000);

        // Function to fetch and display the content of the text file
        function fetchData() {
             fetch('./data.csv')
            .then(response => response.text())
            .then(csvData => {
				 // Split CSV data by lines
                 var csvRows = csvData.trim().split('\n');
                 // Get the last line
                 var lastRow = csvRows[csvRows.length - 1];
                 // Split the last row by comma
                 var values = lastRow.split(',');
                 // Prepare HTML to display
                 var html = '<p>' + values[0] + ': ' + values[1] + '</p>';
                 // Set the HTML content
                document.getElementById('lastRow').innerHTML = html; //piazzo il contenuto all'interno dell'elemento che ha id = lastRow
            })
        }

        // Call fetchData on window load
        window.onload = fetchData;
    </script>
   
</body>

</html>
